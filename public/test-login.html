<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Test Login - Grup Admin</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                max-width: 600px;
                margin: 50px auto;
                padding: 20px;
                background: #f5f5f5;
            }
            .container {
                background: white;
                padding: 30px;
                border-radius: 10px;
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            }
            .form-group {
                margin-bottom: 15px;
            }
            label {
                display: block;
                margin-bottom: 5px;
                font-weight: bold;
            }
            input,
            button {
                width: 100%;
                padding: 10px;
                border: 1px solid #ddd;
                border-radius: 5px;
                font-size: 16px;
            }
            button {
                background: #007bff;
                color: white;
                border: none;
                cursor: pointer;
                margin-top: 10px;
            }
            button:hover {
                background: #0056b3;
            }
            .result {
                margin-top: 20px;
                padding: 15px;
                border-radius: 5px;
                font-weight: bold;
            }
            .success {
                background: #d4edda;
                color: #155724;
                border: 1px solid #c3e6cb;
            }
            .error {
                background: #f8d7da;
                color: #721c24;
                border: 1px solid #f1aeb5;
            }
            .info {
                background: #d1ecf1;
                color: #0c5460;
                border: 1px solid #b7e4ea;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h1>üîß Login Test Page</h1>
            <p>This is a simple test page to verify login functionality.</p>

            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" value="adiazi@grup.com" />
            </div>

            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" id="password" value="12345678" />
            </div>

            <button onclick="testLogin()">Test Login</button>
            <button onclick="testAPI()">Test API Connection</button>
            <button onclick="testJavaScript()">Test JavaScript</button>

            <div id="result"></div>

            <div style="margin-top: 30px">
                <h3>Debug Information:</h3>
                <div id="debug"></div>
            </div>
        </div>

        <script>
            function testJavaScript() {
                document.getElementById('result').innerHTML =
                    '<div class="success">‚úÖ JavaScript is working!</div>';
                console.log('JavaScript test successful');
            }

            async function testAPI() {
                const resultDiv = document.getElementById('result');
                const debugDiv = document.getElementById('debug');

                try {
                    resultDiv.innerHTML =
                        '<div class="info">üîÑ Testing API connection...</div>';

                    const response = await fetch('/api/status');
                    const status = response.status;
                    const data = await response.text();

                    debugDiv.innerHTML = `
                    <strong>API Test Results:</strong><br>
                    Status: ${status}<br>
                    Response: ${data}<br>
                    URL: ${window.location.origin}/api/status
                `;

                    if (response.ok) {
                        resultDiv.innerHTML =
                            '<div class="success">‚úÖ API connection successful!</div>';
                    } else {
                        resultDiv.innerHTML =
                            '<div class="error">‚ùå API connection failed</div>';
                    }
                } catch (error) {
                    resultDiv.innerHTML =
                        '<div class="error">‚ùå API connection error: ' +
                        error.message +
                        '</div>';
                    debugDiv.innerHTML = `<strong>Error:</strong> ${error.message}`;
                    console.error('API test error:', error);
                }
            }

            async function testLogin() {
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
                const resultDiv = document.getElementById('result');
                const debugDiv = document.getElementById('debug');

                try {
                    resultDiv.innerHTML =
                        '<div class="info">üîÑ Testing login...</div>';

                    const loginData = { email, password };
                    console.log('Sending login request:', loginData);

                    const response = await fetch(
                        '/api/z3c6v9b2/k8j3h2g7',
                        {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(loginData),
                        }
                    );

                    console.log('Login response status:', response.status);
                    console.log('Login response headers:', [
                        ...response.headers.entries(),
                    ]);

                    const data = await response.json();
                    console.log('Login response data:', data);

                    debugDiv.innerHTML = `
                    <strong>Login Test Results:</strong><br>
                    URL: ${window.location.origin}/api/z3c6v9b2/k8j3h2g7<br>
                    Method: POST<br>
                    Status: ${response.status}<br>
                    Headers: Content-Type: application/json<br>
                    Request Body: ${JSON.stringify(loginData)}<br>
                    Response: ${JSON.stringify(data, null, 2)}
                `;

                    if (data.success) {
                        resultDiv.innerHTML =
                            '<div class="success">‚úÖ Login successful!</div>';
                    } else {
                        resultDiv.innerHTML =
                            '<div class="error">‚ùå Login failed: ' +
                            data.message +
                            '</div>';
                    }
                } catch (error) {
                    resultDiv.innerHTML =
                        '<div class="error">‚ùå Login error: ' +
                        error.message +
                        '</div>';
                    debugDiv.innerHTML = `<strong>Error:</strong> ${error.message}`;
                    console.error('Login test error:', error);
                }
            }

            // Test on page load
            window.onload = function () {
                document.getElementById('debug').innerHTML = `
                <strong>Page Load Info:</strong><br>
                Current URL: ${window.location.href}<br>
                Origin: ${window.location.origin}<br>
                Protocol: ${window.location.protocol}<br>
                Host: ${window.location.host}<br>
                Port: ${window.location.port}<br>
                Pathname: ${window.location.pathname}
            `;
            };
        </script>
    </body>
</html>
